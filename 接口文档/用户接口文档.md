# ç”¨æˆ·æ¥å£æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [1. æ¥å£æ¦‚è¿°](#1-æ¥å£æ¦‚è¿°)
- [2. åŸºç¡€ä¿¡æ¯](#2-åŸºç¡€ä¿¡æ¯)
- [3. ç”¨æˆ·æ³¨å†Œ](#3-ç”¨æˆ·æ³¨å†Œ)
- [4. ç”¨æˆ·ç™»å½•](#4-ç”¨æˆ·ç™»å½•)
- [5. ç”¨æˆ·ç™»å‡º](#5-ç”¨æˆ·ç™»å‡º)
- [6. è·å–ç”¨æˆ·ä¿¡æ¯](#6-è·å–ç”¨æˆ·ä¿¡æ¯)
- [7. æ›´æ–°ç”¨æˆ·ä¿¡æ¯](#7-æ›´æ–°ç”¨æˆ·ä¿¡æ¯)
- [8. æ›´æ–°ç”¨æˆ·å¤´åƒ](#8-æ›´æ–°ç”¨æˆ·å¤´åƒ)
- [9. ä¿®æ”¹å¯†ç ](#9-ä¿®æ”¹å¯†ç )
- [10. é‡ç½®å¯†ç ](#10-é‡ç½®å¯†ç )
- [11. æœç´¢ç”¨æˆ·](#11-æœç´¢ç”¨æˆ·)
- [12. è®¾å¤‡ç®¡ç†](#12-è®¾å¤‡ç®¡ç†)
- [13. éšç§è®¾ç½®](#13-éšç§è®¾ç½®)
- [14. é»‘åå•ç®¡ç†](#14-é»‘åå•ç®¡ç†)
- [15. é«˜çº§æœç´¢](#15-é«˜çº§æœç´¢)
- [16. ç»Ÿè®¡ä¿¡æ¯](#16-ç»Ÿè®¡ä¿¡æ¯)
- [17. é”™è¯¯ç è¯´æ˜](#17-é”™è¯¯ç è¯´æ˜)

---

## 1. æ¥å£æ¦‚è¿°

### 1.1 æœåŠ¡ä¿¡æ¯
- **æœåŠ¡åç§°**: IMç”¨æˆ·ç®¡ç†æœåŠ¡
- **æœåŠ¡åœ°å€**: `http://localhost:8081`
- **åŸºç¡€è·¯å¾„**: `/api/users`
- **åè®®**: HTTP/HTTPS
- **æ•°æ®æ ¼å¼**: JSON

### 1.2 è®¤è¯æ–¹å¼
- **è®¤è¯ç±»å‹**: JWT (JSON Web Token)
- **Headeræ ¼å¼**: `Authorization: Bearer {token}`
- **Tokenæœ‰æ•ˆæœŸ**: 30åˆ†é’Ÿï¼ˆè®¿é—®ä»¤ç‰Œï¼‰

### 1.3 å“åº”æ ¼å¼
æ‰€æœ‰æ¥å£ç»Ÿä¸€ä½¿ç”¨ä»¥ä¸‹å“åº”æ ¼å¼ï¼š

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {},
  "timestamp": "2025-08-13T13:50:21"
}
```

---

## 2. åŸºç¡€ä¿¡æ¯

### 2.1 è¯·æ±‚å¤´
| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| Content-Type | String | æ˜¯ | å›ºå®šå€¼ï¼šapplication/json |
| Authorization | String | å¦ | Bearer {JWT Token} |

### 2.2 é€šç”¨å“åº”å­—æ®µ
| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| code | Integer | å“åº”çŠ¶æ€ç  |
| message | String | å“åº”æ¶ˆæ¯ |
| data | Object | å“åº”æ•°æ® |
| timestamp | String | å“åº”æ—¶é—´æˆ³ |

### 2.3 çŠ¶æ€ç è¯´æ˜
| çŠ¶æ€ç  | è¯´æ˜ |
|--------|------|
| 200 | è¯·æ±‚æˆåŠŸ |
| 201 | åˆ›å»ºæˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªæˆæƒ |
| 403 | ç¦æ­¢è®¿é—® |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

---

## 3. ç”¨æˆ·æ³¨å†Œ

### 3.1 æ¥å£ä¿¡æ¯
- **æ¥å£è·¯å¾„**: `POST /api/users/register`
- **æ¥å£æè¿°**: ç”¨æˆ·æ³¨å†Œ
- **è®¤è¯è¦æ±‚**: æ— éœ€è®¤è¯

### 3.2 è¯·æ±‚å‚æ•°
```json
{
  "username": "testuser",
  "password": "123456",
  "deviceId": "device001"
}
```

| å­—æ®µå | ç±»å‹ | å¿…å¡« | é•¿åº¦é™åˆ¶ | è¯´æ˜ |
|--------|------|------|----------|------|
| username | String | æ˜¯ | 3-20å­—ç¬¦ | ç”¨æˆ·åï¼Œåªèƒ½åŒ…å«å­—æ¯ |
| password | String | æ˜¯ | 6-20å­—ç¬¦ | å¯†ç  |
| deviceId | String | æ˜¯ | 1-50å­—ç¬¦ | è®¾å¤‡æ ‡è¯† |

### 3.3 å“åº”ç¤ºä¾‹
```json
{
  "code": 201,
  "message": "ç”¨æˆ·æ³¨å†ŒæˆåŠŸ",
  "data": {
    "id": 5,
    "username": "testuser",
    "nickname": "testuser",
    "status": 1,
    "onlineStatus": 0,
    "createdAt": "2025-08-13T13:24:19",
    "updatedAt": "2025-08-13T13:24:19"
  },
  "timestamp": "2025-08-13T13:24:19"
}
```

---

## 4. ç”¨æˆ·ç™»å½•

### 4.1 æ¥å£ä¿¡æ¯
- **æ¥å£è·¯å¾„**: `POST /api/users/login`
- **æ¥å£æè¿°**: ç”¨æˆ·ç™»å½•
- **è®¤è¯è¦æ±‚**: æ— éœ€è®¤è¯

### 4.2 è¯·æ±‚å‚æ•°
```json
{
  "username": "testuser",
  "password": "123456",
  "deviceId": "device001"
}
```

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| username | String | æ˜¯ | ç”¨æˆ·å |
| password | String | æ˜¯ | å¯†ç  |
| deviceId | String | æ˜¯ | è®¾å¤‡æ ‡è¯† |

### 4.3 å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "ç”¨æˆ·ç™»å½•æˆåŠŸ",
  "data": "eyJhbGciOiJIUzI1NiJ9.eyJ0eXBlIjoiYWNjZXNzIiwiZGV2aWNlSWQiOiJkZXZpY2UwMDEiLCJzdWIiOiJ0ZXN0dXNlciIsImlzcyI6ImltLXN5c3RlbSIsImF1ZCI6WyJpbS11c2VycyJdLCJpYXQiOjE3NTUwNjc4MjEsImV4cCI6MTc1NTI4MzgyMX0.GNXcTs7Y517-dVWKBLaoSCzLzPn9N5WcGQ5xQKB1mME",
  "timestamp": "2025-08-13T13:50:21"
}
```

---

## 5. ç”¨æˆ·ç™»å‡º

### 5.1 æ¥å£ä¿¡æ¯
- **æ¥å£è·¯å¾„**: `POST /api/users/logout`
- **æ¥å£æè¿°**: ç”¨æˆ·ç™»å‡º
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

### 5.2 è¯·æ±‚å¤´
```
Authorization: Bearer {JWT Token}
```

### 5.3 è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| deviceId | String | æ˜¯ | è®¾å¤‡æ ‡è¯† |

### 5.4 å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "ç”¨æˆ·ç™»å‡ºæˆåŠŸ",
  "data": "ç™»å‡ºæˆåŠŸ",
  "timestamp": "2025-08-13T13:55:00"
}
```

---

## 6. è·å–ç”¨æˆ·ä¿¡æ¯

### 6.1 æ¥å£ä¿¡æ¯
- **æ¥å£è·¯å¾„**: `GET /api/users/profile`
- **æ¥å£æè¿°**: è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

### 6.2 è¯·æ±‚å¤´
```
Authorization: Bearer {JWT Token}
```

### 6.3 å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "è·å–ç”¨æˆ·ä¿¡æ¯æˆåŠŸ",
  "data": {
    "id": 5,
    "username": "testuser",
    "email": null,
    "phone": null,
    "nickname": "æ–°æ˜µç§°",
    "avatarUrl": "https://example.com/avatar.jpg",
    "signature": "è¿™æ˜¯æˆ‘çš„ä¸ªæ€§ç­¾å",
    "gender": 1,
    "birthday": null,
    "region": null,
    "status": 1,
    "onlineStatus": 1,
    "lastLoginAt": "2025-08-13T13:50:21",
    "lastActiveAt": "2025-08-13T13:50:21",
    "createdAt": "2025-08-13T13:24:19",
    "updatedAt": "2025-08-13T13:50:42"
  },
  "timestamp": "2025-08-13T13:55:30"
}
```

---

## 7. æ›´æ–°ç”¨æˆ·ä¿¡æ¯

### 7.1 æ¥å£ä¿¡æ¯
- **æ¥å£è·¯å¾„**: `PUT /api/users/profile`
- **æ¥å£æè¿°**: æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

### 7.2 è¯·æ±‚å¤´
```
Authorization: Bearer {JWT Token}
Content-Type: application/json
```

### 7.3 è¯·æ±‚å‚æ•°
```json
{
  "nickname": "æ–°æ˜µç§°",
  "signature": "è¿™æ˜¯æˆ‘çš„ä¸ªæ€§ç­¾å",
  "gender": 1
}
```

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| nickname | String | å¦ | æ˜µç§° |
| signature | String | å¦ | ä¸ªæ€§ç­¾å |
| gender | Integer | å¦ | æ€§åˆ«ï¼š0-æœªçŸ¥ï¼Œ1-ç”·ï¼Œ2-å¥³ |
| birthday | String | å¦ | ç”Ÿæ—¥ï¼ˆISO 8601æ ¼å¼ï¼‰ |
| region | String | å¦ | åœ°åŒº |

### 7.4 å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "ç”¨æˆ·ä¿¡æ¯æ›´æ–°æˆåŠŸ",
  "data": {
    "id": 5,
    "username": "testuser",
    "nickname": "æ–°æ˜µç§°",
    "signature": "è¿™æ˜¯æˆ‘çš„ä¸ªæ€§ç­¾å",
    "gender": 1,
    "updatedAt": "2025-08-13T13:55:45.869144"
  },
  "timestamp": "2025-08-13T13:55:45"
}
```

---

## 8. æ›´æ–°ç”¨æˆ·å¤´åƒ

### 8.1 æ¥å£ä¿¡æ¯
- **æ¥å£è·¯å¾„**: `PUT /api/users/avatar`
- **æ¥å£æè¿°**: æ›´æ–°ç”¨æˆ·å¤´åƒ
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

### 8.2 è¯·æ±‚å¤´
```
Authorization: Bearer {JWT Token}
```

### 8.3 è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| avatarUrl | String | æ˜¯ | å¤´åƒURLåœ°å€ |

### 8.4 å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "å¤´åƒæ›´æ–°æˆåŠŸ",
  "data": "æ›´æ–°æˆåŠŸ",
  "timestamp": "2025-08-13T13:56:00"
}
```

---

## 9. ä¿®æ”¹å¯†ç 

### 9.1 æ¥å£ä¿¡æ¯
- **æ¥å£è·¯å¾„**: `PUT /api/users/password`
- **æ¥å£æè¿°**: ä¿®æ”¹ç”¨æˆ·å¯†ç 
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

### 9.2 è¯·æ±‚å¤´
```
Authorization: Bearer {JWT Token}
Content-Type: application/json
```

### 9.3 è¯·æ±‚å‚æ•°
```json
{
  "oldPassword": "123456",
  "newPassword": "newpass123"
}
```

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| oldPassword | String | æ˜¯ | æ—§å¯†ç  |
| newPassword | String | æ˜¯ | æ–°å¯†ç  |

### 9.4 å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "å¯†ç ä¿®æ”¹æˆåŠŸ",
  "data": "ä¿®æ”¹æˆåŠŸ",
  "timestamp": "2025-08-13T13:56:30"
}
```

---

## 10. é‡ç½®å¯†ç 

### 10.1 æ¥å£ä¿¡æ¯
- **æ¥å£è·¯å¾„**: `POST /api/users/reset-password`
- **æ¥å£æè¿°**: é‡ç½®ç”¨æˆ·å¯†ç 
- **è®¤è¯è¦æ±‚**: æ— éœ€è®¤è¯

### 10.2 è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| email | String | æ˜¯ | ç”¨æˆ·é‚®ç®± |

### 10.3 å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "å¯†ç é‡ç½®æˆåŠŸï¼Œè¯·æŸ¥çœ‹é‚®ç®±",
  "data": "é‡ç½®æˆåŠŸ",
  "timestamp": "2025-08-13T13:57:00"
}
```

---

## 11. æœç´¢ç”¨æˆ·

### 11.1 æ¥å£ä¿¡æ¯
- **æ¥å£è·¯å¾„**: `GET /api/users/search`
- **æ¥å£æè¿°**: æœç´¢ç”¨æˆ·
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

### 11.2 è¯·æ±‚å¤´
```
Authorization: Bearer {JWT Token}
```

### 11.3 è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| keyword | String | æ˜¯ | - | æœç´¢å…³é”®è¯ |
| limit | Integer | å¦ | 20 | è¿”å›ç»“æœæ•°é‡é™åˆ¶ |

### 11.4 å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "æœç´¢ç”¨æˆ·æˆåŠŸ",
  "data": [
    {
      "id": 5,
      "username": "testuser",
      "nickname": "æ–°æ˜µç§°",
      "avatarUrl": "https://example.com/avatar.jpg",
      "signature": "è¿™æ˜¯æˆ‘çš„ä¸ªæ€§ç­¾å",
      "gender": 1,
      "status": 1,
      "onlineStatus": 1,
      "lastLoginAt": "2025-08-13T13:50:21",
      "lastActiveAt": "2025-08-13T13:50:21",
      "createdAt": "2025-08-13T13:24:19",
      "updatedAt": "2025-08-13T13:50:42"
    }
  ],
  "timestamp": "2025-08-13T13:57:30"
}
```

---

## 12. è®¾å¤‡ç®¡ç†

### 12.1 è·å–ç”¨æˆ·è®¾å¤‡åˆ—è¡¨
- **æ¥å£è·¯å¾„**: `GET /api/users/{userId}/devices`
- **æ¥å£æè¿°**: è·å–ç”¨æˆ·çš„æ‰€æœ‰è®¾å¤‡ä¿¡æ¯
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| userId | Long | æ˜¯ | ç”¨æˆ·ID |

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "è·å–è®¾å¤‡åˆ—è¡¨æˆåŠŸ",
  "data": [
    {
      "id": 1,
      "deviceId": "device001",
      "deviceName": "iPhone 15",
      "deviceType": "mobile",
      "isTrusted": true,
      "lastLoginAt": "2025-08-13T13:50:21",
      "createdAt": "2025-08-13T13:24:19"
    }
  ],
  "timestamp": "2025-08-13T13:58:00"
}
```

### 12.2 æ·»åŠ ç”¨æˆ·è®¾å¤‡
- **æ¥å£è·¯å¾„**: `POST /api/users/{userId}/devices`
- **æ¥å£æè¿°**: ä¸ºç”¨æˆ·æ·»åŠ æ–°è®¾å¤‡
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| userId | Long | æ˜¯ | ç”¨æˆ·ID |

#### è¯·æ±‚ä½“
```json
{
  "deviceId": "device002",
  "deviceName": "MacBook Pro",
  "deviceType": "desktop",
  "isTrusted": false
}
```

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "æ·»åŠ è®¾å¤‡æˆåŠŸ",
  "data": {
    "id": 2,
    "deviceId": "device002",
    "deviceName": "MacBook Pro",
    "deviceType": "desktop",
    "isTrusted": false,
    "lastLoginAt": "2025-08-13T13:59:00",
    "createdAt": "2025-08-13T13:59:00"
  },
  "timestamp": "2025-08-13T13:59:00"
}
```

### 12.3 ç§»é™¤ç”¨æˆ·è®¾å¤‡
- **æ¥å£è·¯å¾„**: `DELETE /api/users/{userId}/devices/{deviceId}`
- **æ¥å£æè¿°**: ç§»é™¤ç”¨æˆ·çš„æŒ‡å®šè®¾å¤‡
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| userId | Long | æ˜¯ | ç”¨æˆ·ID |
| deviceId | String | æ˜¯ | è®¾å¤‡ID |

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "ç§»é™¤è®¾å¤‡æˆåŠŸ",
  "data": true,
  "timestamp": "2025-08-13T14:00:00"
}
```

### 12.4 è®¾ç½®è®¾å¤‡ä¿¡ä»»çŠ¶æ€
- **æ¥å£è·¯å¾„**: `PUT /api/users/{userId}/devices/{deviceId}/trust`
- **æ¥å£æè¿°**: è®¾ç½®è®¾å¤‡çš„ä¿¡ä»»çŠ¶æ€
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| userId | Long | æ˜¯ | ç”¨æˆ·ID |
| deviceId | String | æ˜¯ | è®¾å¤‡ID |
| isTrusted | Boolean | æ˜¯ | æ˜¯å¦ä¿¡ä»» |

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "è®¾ç½®è®¾å¤‡ä¿¡ä»»çŠ¶æ€æˆåŠŸ",
  "data": true,
  "timestamp": "2025-08-13T14:01:00"
}
```

---

## 13. éšç§è®¾ç½®

### 13.1 è·å–ç”¨æˆ·éšç§è®¾ç½®
- **æ¥å£è·¯å¾„**: `GET /api/users/{userId}/privacy`
- **æ¥å£æè¿°**: è·å–ç”¨æˆ·çš„éšç§è®¾ç½®
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| userId | Long | æ˜¯ | ç”¨æˆ·ID |

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "è·å–éšç§è®¾ç½®æˆåŠŸ",
  "data": {
    "userId": 5,
    "friendRequestMode": 1,
    "allowSearchByUsername": true,
    "allowSearchByPhone": false,
    "allowSearchByEmail": false,
    "allowGroupInvite": true,
    "allowStrangerMessage": false,
    "messageReadReceipt": true,
    "onlineStatusVisible": true,
    "createdAt": "2025-08-13T13:24:19",
    "updatedAt": "2025-08-13T13:24:19"
  },
  "timestamp": "2025-08-13T14:02:00"
}
```

### 13.2 æ›´æ–°ç”¨æˆ·éšç§è®¾ç½®
- **æ¥å£è·¯å¾„**: `PUT /api/users/{userId}/privacy`
- **æ¥å£æè¿°**: æ›´æ–°ç”¨æˆ·çš„éšç§è®¾ç½®
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| userId | Long | æ˜¯ | ç”¨æˆ·ID |

#### è¯·æ±‚ä½“
```json
{
  "friendRequestMode": 1,
  "allowSearchByUsername": true,
  "allowSearchByPhone": false,
  "allowSearchByEmail": false,
  "allowGroupInvite": true,
  "allowStrangerMessage": false,
  "messageReadReceipt": true,
  "onlineStatusVisible": true
}
```

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "æ›´æ–°éšç§è®¾ç½®æˆåŠŸ",
  "data": {
    "userId": 5,
    "friendRequestMode": 1,
    "allowSearchByUsername": true,
    "allowSearchByPhone": false,
    "allowSearchByEmail": false,
    "allowGroupInvite": true,
    "allowStrangerMessage": false,
    "messageReadReceipt": true,
    "onlineStatusVisible": true,
    "createdAt": "2025-08-13T13:24:19",
    "updatedAt": "2025-08-13T14:03:00"
  },
  "timestamp": "2025-08-13T14:03:00"
}
```

---

## 14. é»‘åå•ç®¡ç†

### 14.1 è·å–ç”¨æˆ·é»‘åå•
- **æ¥å£è·¯å¾„**: `GET /api/users/{userId}/blacklist`
- **æ¥å£æè¿°**: è·å–ç”¨æˆ·çš„é»‘åå•åˆ—è¡¨
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| userId | Long | æ˜¯ | ç”¨æˆ·ID |

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "è·å–é»‘åå•æˆåŠŸ",
  "data": [
    {
      "id": 1,
      "userId": 5,
      "blockedUserId": 10,
      "blockType": 1,
      "reason": "éªšæ‰°è¡Œä¸º",
      "createdAt": "2025-08-13T14:04:00"
    }
  ],
  "timestamp": "2025-08-13T14:04:00"
}
```

### 14.2 æ·»åŠ ç”¨æˆ·åˆ°é»‘åå•
- **æ¥å£è·¯å¾„**: `POST /api/users/{userId}/blacklist`
- **æ¥å£æè¿°**: å°†ç”¨æˆ·æ·»åŠ åˆ°é»‘åå•
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| userId | Long | æ˜¯ | ç”¨æˆ·ID |

#### è¯·æ±‚ä½“
```json
{
  "blockedUserId": 10,
  "blockType": 1,
  "reason": "éªšæ‰°è¡Œä¸º"
}
```

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "æ·»åŠ åˆ°é»‘åå•æˆåŠŸ",
  "data": {
    "id": 1,
    "userId": 5,
    "blockedUserId": 10,
    "blockType": 1,
    "reason": "éªšæ‰°è¡Œä¸º",
    "createdAt": "2025-08-13T14:05:00"
  },
  "timestamp": "2025-08-13T14:05:00"
}
```

### 14.3 ä»é»‘åå•ç§»é™¤ç”¨æˆ·
- **æ¥å£è·¯å¾„**: `DELETE /api/users/{userId}/blacklist/{blockedUserId}`
- **æ¥å£æè¿°**: ä»é»‘åå•ä¸­ç§»é™¤ç”¨æˆ·
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| userId | Long | æ˜¯ | ç”¨æˆ·ID |
| blockedUserId | Long | æ˜¯ | è¢«æ‹‰é»‘ç”¨æˆ·ID |

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "ä»é»‘åå•ç§»é™¤æˆåŠŸ",
  "data": true,
  "timestamp": "2025-08-13T14:06:00"
}
```

### 14.4 æ£€æŸ¥ç”¨æˆ·é»‘åå•çŠ¶æ€
- **æ¥å£è·¯å¾„**: `GET /api/users/{userId}/blacklist/check/{targetUserId}`
- **æ¥å£æè¿°**: æ£€æŸ¥æŒ‡å®šç”¨æˆ·æ˜¯å¦åœ¨é»‘åå•ä¸­
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| userId | Long | æ˜¯ | ç”¨æˆ·ID |
| targetUserId | Long | æ˜¯ | ç›®æ ‡ç”¨æˆ·ID |

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "æ£€æŸ¥é»‘åå•çŠ¶æ€æˆåŠŸ",
  "data": true,
  "timestamp": "2025-08-13T14:07:00"
}
```

---

## 15. é«˜çº§æœç´¢

### 15.1 æ ¹æ®ç”¨æˆ·åæœç´¢
- **æ¥å£è·¯å¾„**: `GET /api/users/search/username`
- **æ¥å£æè¿°**: æ ¹æ®ç”¨æˆ·åè¿›è¡Œç²¾ç¡®æœç´¢
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| username | String | æ˜¯ | - | ç”¨æˆ·å |
| limit | Integer | å¦ | 20 | è¿”å›ç»“æœæ•°é‡é™åˆ¶ |

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "æ ¹æ®ç”¨æˆ·åæœç´¢æˆåŠŸ",
  "data": [
    {
      "id": 5,
      "username": "testuser",
      "nickname": "æ–°æ˜µç§°",
      "avatarUrl": "https://example.com/avatar.jpg",
      "status": 1,
      "onlineStatus": 1
    }
  ],
  "timestamp": "2025-08-13T14:08:00"
}
```

### 15.2 æ ¹æ®æ˜µç§°æœç´¢
- **æ¥å£è·¯å¾„**: `GET /api/users/search/nickname`
- **æ¥å£æè¿°**: æ ¹æ®æ˜µç§°è¿›è¡Œæ¨¡ç³Šæœç´¢
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| nickname | String | æ˜¯ | - | æ˜µç§° |
| limit | Integer | å¦ | 20 | è¿”å›ç»“æœæ•°é‡é™åˆ¶ |

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "æ ¹æ®æ˜µç§°æœç´¢æˆåŠŸ",
  "data": [
    {
      "id": 5,
      "username": "testuser",
      "nickname": "æ–°æ˜µç§°",
      "avatarUrl": "https://example.com/avatar.jpg",
      "status": 1,
      "onlineStatus": 1
    }
  ],
  "timestamp": "2025-08-13T14:09:00"
}
```

### 15.3 é«˜çº§æœç´¢
- **æ¥å£è·¯å¾„**: `POST /api/users/search/advanced`
- **æ¥å£æè¿°**: æ”¯æŒå¤šæ¡ä»¶çš„é«˜çº§æœç´¢
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

#### è¯·æ±‚ä½“
```json
{
  "username": "test",
  "nickname": "æ˜µç§°",
  "email": "test@example.com",
  "phone": "13800138000",
  "region": "åŒ—äº¬",
  "gender": 1,
  "limit": 20
}
```

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| username | String | å¦ | ç”¨æˆ·åï¼ˆæ¨¡ç³ŠåŒ¹é…ï¼‰ |
| nickname | String | å¦ | æ˜µç§°ï¼ˆæ¨¡ç³ŠåŒ¹é…ï¼‰ |
| email | String | å¦ | é‚®ç®±ï¼ˆç²¾ç¡®åŒ¹é…ï¼‰ |
| phone | String | å¦ | æ‰‹æœºå·ï¼ˆç²¾ç¡®åŒ¹é…ï¼‰ |
| region | String | å¦ | åœ°åŒºï¼ˆæ¨¡ç³ŠåŒ¹é…ï¼‰ |
| gender | Integer | å¦ | æ€§åˆ«ï¼š0-æœªçŸ¥ï¼Œ1-ç”·ï¼Œ2-å¥³ |
| limit | Integer | å¦ | è¿”å›ç»“æœæ•°é‡é™åˆ¶ï¼Œé»˜è®¤20 |

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "é«˜çº§æœç´¢æˆåŠŸ",
  "data": [
    {
      "id": 5,
      "username": "testuser",
      "nickname": "æ–°æ˜µç§°",
      "email": "test@example.com",
      "phone": "13800138000",
      "region": "åŒ—äº¬",
      "gender": 1,
      "status": 1,
      "onlineStatus": 1
    }
  ],
  "timestamp": "2025-08-13T14:10:00"
}
```

---

## 16. ç»Ÿè®¡ä¿¡æ¯

### 16.1 è·å–åœ¨çº¿ç”¨æˆ·æ•°é‡
- **æ¥å£è·¯å¾„**: `GET /api/users/online-count`
- **æ¥å£æè¿°**: è·å–å½“å‰åœ¨çº¿ç”¨æˆ·æ•°é‡
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "è·å–åœ¨çº¿ç”¨æˆ·æ•°é‡æˆåŠŸ",
  "data": 1250,
  "timestamp": "2025-08-13T14:11:00"
}
```

### 16.2 è·å–ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯
- **æ¥å£è·¯å¾„**: `GET /api/users/statistics`
- **æ¥å£æè¿°**: è·å–ç”¨æˆ·ç›¸å…³çš„ç»Ÿè®¡ä¿¡æ¯
- **è®¤è¯è¦æ±‚**: éœ€è¦JWTè®¤è¯

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "è·å–ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯æˆåŠŸ",
  "data": {
    "totalUsers": 5000,
    "activeUsers": 1250,
    "newUsersToday": 25,
    "newUsersThisWeek": 150,
    "newUsersThisMonth": 580,
    "onlineUsers": 1250,
    "offlineUsers": 3750,
    "verifiedUsers": 4800,
    "unverifiedUsers": 200
  },
  "timestamp": "2025-08-13T14:12:00"
}
```

---

## 17. é”™è¯¯ç è¯´æ˜

### 17.1 é€šç”¨é”™è¯¯ç 
| é”™è¯¯ç  | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|--------|------|----------|
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | æ£€æŸ¥è¯·æ±‚å‚æ•°æ ¼å¼å’Œå¿…å¡«å­—æ®µ |
| 401 | æœªæˆæƒ | æ£€æŸ¥JWT Tokenæ˜¯å¦æœ‰æ•ˆ |
| 403 | ç¦æ­¢è®¿é—® | æ£€æŸ¥ç”¨æˆ·æƒé™ |
| 404 | èµ„æºä¸å­˜åœ¨ | æ£€æŸ¥è¯·æ±‚çš„èµ„æºæ˜¯å¦å­˜åœ¨ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | è”ç³»æŠ€æœ¯æ”¯æŒ |

### 17.2 ä¸šåŠ¡é”™è¯¯ç 
| é”™è¯¯ç  | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|--------|------|----------|
| USER_NOT_FOUND | ç”¨æˆ·ä¸å­˜åœ¨ | æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦æ­£ç¡® |
| PASSWORD_ERROR | å¯†ç é”™è¯¯ | æ£€æŸ¥å¯†ç æ˜¯å¦æ­£ç¡® |
| USERNAME_EXISTS | ç”¨æˆ·åå·²å­˜åœ¨ | é€‰æ‹©å…¶ä»–ç”¨æˆ·å |
| TOKEN_EXPIRED | Tokenå·²è¿‡æœŸ | é‡æ–°ç™»å½•è·å–æ–°Token |
| INVALID_TOKEN | æ— æ•ˆçš„Token | æ£€æŸ¥Tokenæ ¼å¼æ˜¯å¦æ­£ç¡® |
| DEVICE_NOT_FOUND | è®¾å¤‡ä¸å­˜åœ¨ | æ£€æŸ¥è®¾å¤‡IDæ˜¯å¦æ­£ç¡® |
| DEVICE_ALREADY_EXISTS | è®¾å¤‡å·²å­˜åœ¨ | æ£€æŸ¥æ˜¯å¦é‡å¤æ·»åŠ  |
| BLACKLIST_ALREADY_EXISTS | ç”¨æˆ·å·²åœ¨é»‘åå•ä¸­ | æ£€æŸ¥é»‘åå•çŠ¶æ€ |
| PRIVACY_SETTINGS_NOT_FOUND | éšç§è®¾ç½®ä¸å­˜åœ¨ | å…ˆåˆ›å»ºéšç§è®¾ç½® |

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿï¼š
- **é‚®ç®±**: dev@im-system.com
- **æ–‡æ¡£ç‰ˆæœ¬**: v2.0.0
- **æ›´æ–°æ—¶é—´**: 2025-08-14
- **æ›´æ–°å†…å®¹**: æ·»åŠ è®¾å¤‡ç®¡ç†ã€éšç§è®¾ç½®ã€é»‘åå•ç®¡ç†ã€é«˜çº§æœç´¢ã€ç»Ÿè®¡ä¿¡æ¯ç­‰æ¥å£
